
@{
    ViewBag.Title = "Index";
}
<style type="text/css">
    .loading {
        font-size: 10pt;
        width: 200px;
        height: 100px;
        display: none;
        position: fixed;
        z-index: 999;
    }
</style>

<div class="loading" align="center">
    <img src="~/Images/t.gif" height="200" />

</div>
<script type="text/javascript">
    var modal, loading;
    function ShowProgress() {
        modal = document.createElement("DIV");
        modal.className = "modal";
        document.body.appendChild(modal);
        loading = document.getElementsByClassName("loading")[0];
        loading.style.display = "block";
        var top = Math.max(window.innerHeight / 2 - loading.offsetHeight / 2, 0);
        var left = Math.max(window.innerWidth / 2 - loading.offsetWidth / 2, 0);
        loading.style.top = top + "px";
        loading.style.left = left + "px";
    };
    ShowProgress();
</script>
<!-- Keep the Page Content Here.-->
<script type="text/javascript">
    window.onload = function () {
        setTimeout(function () {
            document.body.removeChild(modal);
            loading.style.display = "none";
        }, 800); //Delay just used for example and must be set to 0.
    };
</script>

<!-- Main content -->

<style>
    body {
        background-image: url(../../images/33.jpg);
        background-size: cover;
        font-family: Calibri
    }

    .table-hover > tbody > tr:hover {
        background-color: #D2D2D2;
    }
</style>

<div class="card card-outline direct-chat direct-chat-success">



    <div class="card-header" style="background-color: #1976D2">
        <h3 class="card-title" style="color:white">
            <i class="fa fa-calendar"></i>
            My Calendar
        </h3>
    </div>

    <div class="card-body">
        <div id="calender">

          

            <link href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.4.0/fullcalendar.min.css" rel="stylesheet" />
            <link href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.4.0/fullcalendar.print.css" rel="stylesheet" media="print" />

            @section Scripts{
                <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
                <script src="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.4.0/fullcalendar.min.js"></script>

                <script>
                    $(document).ready(function () {
                        var events = [];
                        $.ajax({
                            type: "GET",
                            url: "/Calender/GetEvents",
                            success: function (data) {
                                $.each(data, function (i, v) {
                                    events.push({

                                        title: "Facility :" + v.Subject + "\n" + " " + v.location + "\n" + "Facility Type: " + v.Facility_Type
                                            + "\n" + "Credential : " + v.certification + "\n" + "Shift : " + v.Shift,

                                        start: moment(v.StartDate),
                                        end: v.StartDate != null ? moment(v.StartDate) : null,
                                        color: v.Color,
                                        allDay: v.Shift,

                                        ppp: v.Facility_Type,
                                        Subject: v.Subject,
                                        certification: v.Certification,
                                        allDay: v.Shift,
                                        status: v.status,
                                        Emp: v.Employee,
                                        start: moment(v.StartDate),
                                    });
                                })

                                GenerateCalender(events);
                            },
                            error: function (error) {
                                alert('failed');
                            }
                        })

                        function GenerateCalender(events) {
                            $('#calender').fullCalendar('destroy');
                            $('#calender').fullCalendar({
                                contentHeight: 700,
                                defaultDate: new Date(),
                                timeFormat: 'h(:mm)a',
                                header: {
                                    left: 'prev,next today',
                                    center: 'title',
                                    right: 'month,basicWeek,basicDay'
                                },
                                eventLimit: false,
                                eventColor: "#00ADEE",
                            
                                
                                events: events,
                                eventClick: function (calEvent, jsEvent, view) {
                                    $('#myModal #eventTitle').text(calEvent.title);
                                    var $description = $('<div/>');
                                    $description.append($('<p/>').html('<b>Start:</b>' + calEvent.start.format("DD-MMM-YYYY HH:mm a")));
                                    if (calEvent.end != null) {
                                        $description.append($('<p/>').html('<b>End:</b>' + calEvent.end.format("DD-MMM-YYYY HH:mm a")));
                                    }
                                    $description.append($('<p/>').html('<b>Description:</b>' + calEvent.description));
                                    $('#myModal #pDetails').empty().html($description);

                                    $('#myModal').modal();
                                }
                            })
                        }
                    })
                </script>
            }

        </div>
    </div>
    <div class="card card-success card-outline direct-chat direct-chat-success">
        <div class="card-footer bg-transparent border-success">
            <footer>
                <img src="~/Images/Andest.png" height="50" />
            </footer>
        </div>
        </div>
</div>
